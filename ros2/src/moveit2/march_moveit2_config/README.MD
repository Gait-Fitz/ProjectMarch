# MoveIt2 package created with ROS1 MoveIt1 Setup Assistant and ported to ROS2

This package was created with the ROS1 MoveIt1 Setup Assistant and ported to ROS2. Porting is based on the panda_moveit_config package working in ROS2: https://github.com/ros-planning/moveit_resources/tree/ros2/panda_moveit_config

## Main steps:

The following steps are followed to port the ROS1 package generated by the MoveIt1 Setup Assistant to a ROS2 package:

1. Generate demo package using MoveIt Setup Assistant in MoveIt1 (using Noetic).

2. Change CMakeLists.txt:
    * Set cmake_minimum_required to 3.3
    * Change `find_package(catkin REQUIRED)` to `find_package(ament_cmake REQUIRED)`
    * Change `catkin_package()` to `ament_package()`
    * Change install to `install(DIRECTORY launch config DESTINATION share/${PROJECT_NAME})`
3. Change Package.xml:
    * Set package format to 2
    * Change catkin to ament_cmake
    * Change run_depend to exec_depend
    * Add amen_cmake as export
4. Create a `demo.launch.py` file based on: https://github.com/ros-planning/moveit_resources/blob/ros2/panda_moveit_config/launch/demo.launch.py

Step 2 till 4 can be found in commit:
https://gitlab.com/project-march/march/-/commit/15d6a08a2f5c4575db66bbdf8d4015d1dd12539f

5. Add a controller to make plan execution possible based on the panda_moveit_config structure. This step has been done in commit: https://gitlab.com/project-march/march/-/commit/2f471d2c7e2307aa569089154e35bcb83547d639


## Possible problems you could encounter:

### Robot not visible
Running the package in ROS2 had the problem that the robot model was not visible in Rviz. An issue has been made for this bug:
https://gitlab.com/project-march/march/-/issues/1171

It turned out that this issue was system specific. Rviz can fail to display URDFs if when the "LC_NUMERIC" value in Ubuntu is set to the wrong language (difference between point and comma in languages). More information about this problem can be found here:

https://answers.ros.org/question/266313/robot-model-not-showing-in-rviz/

https://github.com/ros-visualization/rviz/issues/1249

To fix this bug, make sure that your LC_NUMERIC is set to "en_US.UTF-8".

To check LC_NUMERIC: `echo $LC_NUMERIC`

To change LC_NUMERIC in one terminal: `export LC_NUMERIC="en_US.UTF-8"`

It is recommend to place this in you bashrc file, so that it set correctly for every terminal.