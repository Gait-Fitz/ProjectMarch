<launch>

    <arg name="simulation" default="true" doc="Launch the simulation or the actual exoskeleton"/>

    <arg name="rqt" default="false" doc="Launch the rqt nodes"/>
    <arg name="rviz" default="true" doc="Launch rviz"/>
    <arg name="gazebo_ui" default="true" doc="Launch Gazebo with a ui"/>

    <!-- Load the URDF of the exoskeleton in the ROS parameter server.-->
    <include file="$(find march_description)/launch/load_description.launch"/>

    <!-- OPTIONAL: Launch the rqt plugins that allow for easy debugging.-->
    <group if="$(arg rqt)">
        <include file="$(find march_main)/launch/rqt.launch"/>
    </group>

    <!-- OPTIONAL: Load the rviz plugin which visualizes the actual position of the exoskeleton.-->
    <group if="$(arg rviz)">
        <node name="rviz" pkg="rviz" type="rviz"/>
    </group>

    <!-- Launch the gazebo simulation.-->
    <include file="$(find march_gazebo)/launch/march_world.launch">
        <arg name="gui" value="$(arg gazebo_ui)"/>
    </include>

    <!-- Launch the control node.-->
    <include file="$(find march_control)/launch/march_control.launch"/>

    <node name="master_node" pkg="march_main" type="master_node" output="screen"/>
    <node name="developer_input_node" pkg="march_main" type="developer_input_node" output="screen"/>
    <node name="datalogger_node" pkg="march_main" type="datalogger_node" output="screen"/>
    <node name="gait_node" pkg="march_main" type="gait_node" output="screen"/>
    <node name="sensor_node" pkg="march_main" type="sensor_node" output="screen"/>

</launch>